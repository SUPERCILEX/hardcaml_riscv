(executable
 (public_name arty)
 (promote)
 (libraries cpu core_unix.command_unix core_unix.filename_unix)
 (preprocess
  (pps ppx_jane ppx_deriving_hardcaml)))

(rule
 (target top.v)
 (deps arty.exe)
 (mode promote)
 (action
  (run %{deps} compile -output %{target})))
